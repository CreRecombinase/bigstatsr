<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Sparse SVM — big_spSVM â€¢ bigstatsr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">bigstatsr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Manual</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/operations-with-scaling.html">Operations with scaling</a>
    </li>
    <li>
      <a href="../articles/read-BM-from-file.html">Read a BM from a text file</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://privefl.github.io/about.html">
    <span class="fa fa-user"></span>
     
    About
  </a>
</li>
<li>
  <a href="https://github.com/privefl/bigstatsr">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Sparse SVM</h1>
    </div>

    
    <p>Fit solution paths for sparse linear SVM regularized by lasso or elastic-net
over a grid of values for the regularization parameter lambda.</p>
    

    <pre class="usage"><span class='fu'>big_spSVM</span>(<span class='no'>X</span>, <span class='no'>y01.train</span>, <span class='kw'>ind.train</span> <span class='kw'>=</span> <span class='fu'><a href='seq-dim.html'>rows_along</a></span>(<span class='no'>X</span>), <span class='kw'>covar.train</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>X</th>
      <td><p>A <a href='FBM-class.html'>FBM</a>.</p></td>
    </tr>
    <tr>
      <th>y01.train</th>
      <td><p>Vector of responses, corresponding to <code>ind.train</code>.
<strong>Must be only 0s and 1s.</strong></p></td>
    </tr>
    <tr>
      <th>ind.train</th>
      <td><p>An optional vector of the row indices that are used,
for the training part. If not specified, all rows are used.
<strong>Don't use negative indices.</strong></p></td>
    </tr>
    <tr>
      <th>covar.train</th>
      <td><p>Matrix of covariables to be added in each model to correct
for confounders (e.g. the scores of PCA), corresponding to <code>ind.train</code>.
Default is <code>NULL</code> and corresponds to only adding an intercept to each model.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed on to <code>COPY_sparseSVM</code></p><dl class='dl-horizontal'>
  <dt>alpha</dt><dd><p>The elastic-net mixing parameter that controls the relative
contribution from the lasso and the ridge penalty. It must be a number
between <code>0</code> and <code>1</code>. <code>alpha=1</code> is the lasso penalty and <code>alpha=0</code>
the ridge penalty.</p></dd>
  <dt>gamma</dt><dd><p>The tuning parameter for huberization smoothing of hinge loss.
Default is <code>0.1</code>.</p></dd>
  <dt>nlambda</dt><dd><p>The number of lambda values. Default is <code>100</code>.</p></dd>
  <dt>lambda.min</dt><dd><p>The smallest value for lambda, as a fraction of
<code>lambda.max</code>, the data derived entry value. Default is <code>0.01</code> if the number
of observations is larger than the number of variables and <code>0.05</code> otherwise.</p></dd>
  <dt>lambda</dt><dd><p>A user-specified sequence of lambda values. Typical usage is
to leave blank and have the program automatically compute a <code>lambda</code>
sequence based on <code>nlambda</code> and <code>lambda.min</code>. Specifying
<code>lambda</code> overrides this. This argument should be used with care and
supplied with a decreasing sequence instead of a single value.</p></dd>
  <dt>screen</dt><dd><p>Screening rule to be applied at each <code>lambda</code> that
discards variables for speed. Either "ASR" (default), "SR" or "none". "SR"
stands for the strong rule, and "ASR" for the adaptive strong rule. Using
"ASR" typically requires fewer iterations to converge than "SR", but the
computing time are generally close. Note that the option "none" is used
mainly for debugging, which may lead to much longer computing time.</p></dd>
  <dt>max.iter</dt><dd><p>Maximum number of iterations. Default is 1000.</p></dd>
  <dt>eps</dt><dd><p>Convergence threshold. The algorithms continue until the maximum
change in the objective after any coefficient update is less than <code>eps</code>
times the null deviance.  Default is <code>1E-7</code>.</p></dd>
  <dt>dfmax</dt><dd><p>Upper bound for the number of nonzero coefficients. The
algorithm exits and returns a partial path if <code>dfmax</code> is reached.
Useful for very large dimensions.</p></dd>
  <dt>penalty.factor</dt><dd><p>A numeric vector of length equal to the number of
variables. Each component multiplies <code>lambda</code> to allow differential
penalization. Can be 0 for some variables, in which case the variable is
always in the model without penalization. Default is <code>1</code> for all variables.</p></dd>
  <dt>message</dt><dd><p>If set to <code>TRUE</code>, <code>sparseSVM</code> will inform the user of its
progress. Default is <code>FALSE</code>.</p></dd>
</dl></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A named list containing:</p>
<dt>call</dt><dd><p>The call that produced this object.</p></dd>
<dt>intercept</dt><dd><p>A vector of intercepts, corresponding to each lambda.</p></dd>
<dt>beta</dt><dd><p>The fitted matrix of coefficients. The number of rows is
equal to the number of coefficients, and the number of columns is equal
to <code>nlambda</code>.</p></dd>
<dt>iter</dt><dd><p>A vector of length <code>nlambda</code> containing the number of
iterations until convergence at each value of <code>lambda</code>.</p></dd>
<dt>saturated</dt><dd><p>A logical flag for whether the number of nonzero
coefficients has reached <code>dfmax</code>.</p></dd>
<dt>lambda</dt><dd><p>The sequence of regularization parameter values in the path.</p></dd>
<dt>alpha</dt><dd><p>Input parameter.</p></dd>
<dt>gamma</dt><dd><p>Input parameter.</p></dd>
<dt>penalty.factor</dt><dd><p>Input parameter.</p></dd>
<dt>levels</dt><dd><p>Levels of the output class labels.</p></dd>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><strong>This is a modified version of one function of
<a href='https://github.com/CY-dev/sparseSVM'>package sparseSVM</a></strong>.
This algorithm uses semi-newton coordinate descent. There may exist some
faster algorithm.
    <strong>For now, this function is not exported anymore.</strong> This is because it
doesn't match the results from package sparseSVM anymore, due to
<a href='https://github.com/CY-dev/sparseSVM/pull/6'>a change</a> the author made.
I've contacted him multiple times, without success.
If you really want to use this function, use <code>bigstatsr:::big_spSVM</code>.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><a href='http://www.rdocumentation.org/packages/LiblineaR/topics/LiblineaR'>LiblineaR</a> <a href='http://www.rdocumentation.org/packages/sparseSVM/topics/sparseSVM'>sparseSVM</a></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>set.seed</span>(<span class='fl'>1</span>)

<span class='no'>big_spSVM</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>bigstatsr</span><span class='kw ns'>:::</span><span class='no'><a href='http://www.rdocumentation.org/packages/bigstatsr/topics/big_spSVM'>big_spSVM</a></span>

<span class='co'># simulating some data</span>
<span class='no'>N</span> <span class='kw'>&lt;-</span> <span class='fl'>73</span>
<span class='no'>M</span> <span class='kw'>&lt;-</span> <span class='fl'>430</span>
<span class='no'>X</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='FBM-class.html'>FBM</a></span>(<span class='no'>N</span>, <span class='no'>M</span>, <span class='kw'>init</span> <span class='kw'>=</span> <span class='fu'>rnorm</span>(<span class='no'>N</span> * <span class='no'>M</span>, <span class='kw'>sd</span> <span class='kw'>=</span> <span class='fl'>5</span>))
<span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'>sample</span>(<span class='fl'>0</span>:<span class='fl'>1</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='no'>N</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>y.factor</span> <span class='kw'>&lt;-</span> <span class='fu'>factor</span>(<span class='no'>y</span>, <span class='kw'>levels</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>0</span>))
<span class='no'>covar</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>rnorm</span>(<span class='no'>N</span> * <span class='fl'>3</span>), <span class='no'>N</span>)

<span class='co'># error, only handle standard R matrices</span></div><span class='co'># NOT RUN {</span>
<span class='no'>test</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>sparseSVM</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/sparseSVM/topics/sparseSVM'>sparseSVM</a></span>(<span class='no'>X</span>, <span class='no'>y</span>)
<span class='co'># }</span><div class='input'>
<span class='co'># OK here</span>
<span class='no'>test2</span> <span class='kw'>&lt;-</span> <span class='fu'>big_spSVM</span>(<span class='no'>X</span>, <span class='no'>y</span>)
<span class='fu'>str</span>(<span class='no'>test2</span>)</div><div class='output co'>#&gt; List of 10
#&gt;  $ call          : language COPY_sparseSVM(X = X, y.train = y01.train, ind.train = ind.train, covar.train = covar.train)
#&gt;  $ intercept     : Named num [1:100] -1 -0.886 -0.867 -0.275 -0.26 ...
#&gt;   ..- attr(*, "names")= chr [1:100] "0.2624" "0.2545" "0.2469" "0.2396" ...
#&gt;  $ beta          :Formal class 'dgCMatrix' [package "Matrix"] with 6 slots
#&gt;   .. ..@ i       : int [1:10849] 183 201 304 341 9 183 193 201 304 341 ...
#&gt;   .. ..@ p       : int [1:101] 0 0 4 10 19 29 41 55 77 100 ...
#&gt;   .. ..@ Dim     : int [1:2] 430 100
#&gt;   .. ..@ Dimnames:List of 2
#&gt;   .. .. ..$ : NULL
#&gt;   .. .. ..$ : chr [1:100] "0.2624" "0.2545" "0.2469" "0.2396" ...
#&gt;   .. ..@ x       : num [1:10849] 0.011 -0.00826 0.00404 0.00533 -0.00063 ...
#&gt;   .. ..@ factors : list()
#&gt;  $ iter          : int [1:100] 0 9 6 84 3 2 5 6 5 4 ...
#&gt;  $ saturated     : logi FALSE
#&gt;  $ lambda        : num [1:100] 0.262 0.255 0.247 0.24 0.232 ...
#&gt;  $ alpha         : num 1
#&gt;  $ gamma         : num 0.1
#&gt;  $ penalty.factor: num [1:430] 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ levels        : int [1:2] 0 1
#&gt;  - attr(*, "class")= chr "big_sp"</div><div class='input'>
<span class='co'># how to use covariables?</span>
<span class='no'>X2</span> <span class='kw'>&lt;-</span> <span class='fu'>cbind</span>(<span class='no'>X</span>[], <span class='no'>covar</span>)
<span class='no'>test</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>sparseSVM</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/sparseSVM/topics/sparseSVM'>sparseSVM</a></span>(<span class='no'>X2</span>, <span class='no'>y.factor</span>, <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)
<span class='no'>test2</span> <span class='kw'>&lt;-</span> <span class='fu'>big_spSVM</span>(<span class='no'>X</span>, <span class='no'>y</span>, <span class='kw'>covar.train</span> <span class='kw'>=</span> <span class='no'>covar</span>, <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)
<span class='co'># verification</span>
<span class='fu'>all.equal</span>(<span class='no'>test2</span>$<span class='no'>lambda</span>, <span class='no'>test</span>$<span class='no'>lambda</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'>all.equal</span>(<span class='fu'>as.matrix</span>(<span class='no'>test2</span>$<span class='no'>beta</span>), <span class='no'>test</span>$<span class='no'>weights</span>[-<span class='fl'>1</span>, ], <span class='kw'>check.attributes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'>all.equal</span>(<span class='no'>test2</span>$<span class='no'>intercept</span>, <span class='no'>test</span>$<span class='no'>weights</span>[<span class='fl'>1</span>, ])</div><div class='output co'>#&gt; [1] TRUE</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Florian PrivÃ©.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
